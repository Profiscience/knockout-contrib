# Contributing

You will need [node][] and [yarn][] installed. You will also need to have [Firefox][] installed to run the router tests.


## Build Scripts

[npm/yarn run scripts][run-scripts] are used for building, testing, etc. Available scripts can be found in the root `package.json`, as well as the `package.json` for each package. They are ran using `yarn <script>` in their respective directories.

e.g.

```bash
$ yarn test
# tests all packages

$ cd packages/model.builders.base
$ yarn test
# test model.builders.base package
```


## Guidelines

- Your push will be rejected if it does not satisfy `tslint`, so save yourself the trouble and make sure your editor is configured to lint and is using the root level tsconfig.json.

- Add unit tests for any new code. [Jest][] is used for testing in all packages except the router, which uses [karma][].

- Don't break existing tests. *Try* to keep coverage the same or better.

- Include examples for components. Update when relevant.

- Update the package README.md and docs when relevant.

- Update the package CHANGELOG.md when relevant.

- Use `yarn generate` for new packages when relevant.

- Don't use `any` unless necessary.


## Metapackages

Metapackages contain a .meta file and are generated by the `yarn meta` task, which exposes all packages for which the metapackage name is a substring.

For example, the `bindings` package is a metapackage, and exposes all of the `bindings.*` packages.

Metapackages should not be edited directly. If there is an error, it should be handled in [./tasks/meta](./tasks/meta.js).


## Designing Components

[Bootstrap v4][] is used as the base for styling components. For component specific styles, [CSS Modules][] and [cssnext][] are used via [postcss][].

[Use camelCased class names](https://github.com/css-modules/css-modules#naming)

When writing component-specific styles, the `*.css.d.ts` file will need to be updated to prevent compiler errors. This file is generated during a build, and to ease this a `watch` task exists for all components.

To view the component in a browser, use the example, and start `yarn serve:examples` in the repository root. Note, this relies on the `dist/*.css` files being updated to rebuild the examples, so you will need to have `watch` running in the package as well.

e.g.

```bash
$ yarn serve:examples

# in another shell session (tab, screen, etc.)
$ cd packages/component.my-component
$ yarn watch
```

[node]: https://nodejs.org
[yarn]: https://yarnpkg.com
[Firefox]: https://www.mozilla.org/en-US/firefox/
[run-scripts]: https://yarnpkg.com/lang/en/docs/cli/run/
[Jest]: https://facebook.github.io/jest/
[karma]: https://karma-runner.github.io/2.0/index.html
[Bootstrap v4]: https://getbootstrap.com/
[CSS Modules]: https://github.com/css-modules/css-modules
[cssnext]: https://cssnext.io/features/
[postcss]: https://postcss.org/