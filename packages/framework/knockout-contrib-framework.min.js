!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("knockout")):"function"==typeof define&&define.amd?define(["exports","knockout"],n):n((t.ko=t.ko||{},t.ko.contrib=t.ko.contrib||{},t.ko.contrib.framework={}),t.ko)}(this,function(t,n){"use strict";function e(t,n){function e(){this.constructor=t}g(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}function r(t,n,e,r){return new(e||(e=Promise))(function(o,i){function u(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(u,c)}a((r=r.apply(t,n||[])).next())})}function o(t,n){function e(t){return function(n){return r([t,n])}}function r(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&e[0]?"return":e[0]?"throw":"next"])&&!(u=u.call(i,e[1])).done)return u;switch(i=0,u&&(e=[0,u.value]),e[0]){case 0:case 1:u=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){a.label=e[1];break}if(6===e[0]&&a.label<u[1]){a.label=u[1],u=e;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(e);break}u[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(t,a)}catch(t){e=[6,t],i=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var o,i,u,c,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c}function i(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}function u(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),u=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return u}function c(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(u(arguments[n]));return t}function a(t,n){Object.defineProperty(t,n,S({},Object.getOwnPropertyDescriptor(t,n)||{},{enumerable:!1}))}function s(t,e,r){if(void 0===e&&(e=!1),void 0===r&&(r=!1),n.isObservable(t))return t;if(t instanceof Array){for(var o=[],i=0;i<t.length;i++)o[i]=s(t[i],e,!0);return n.observableArray(o)}if(t instanceof Date||t instanceof RegExp)return n.observable(t);if(t instanceof Function)return t;if(t instanceof Object){for(var u={},c=0,a=Object.keys(t);c<a.length;c++){var f=a[c];u[f]=s(t[f],e)}return u}return r&&!e?t:n.observable(t)}function f(t,e,r){void 0===r&&(r=!1);for(var o=Object.keys(e),i=0,u=o;i<u.length;i++){var c=u[i];l(t[c])?t[c]=s(e[c],e[c]instanceof Array&&r):n.isObservable(t[c])?t[c](e[c]instanceof Array&&r?n.unwrap(s(e[c],!0)):e[c]):l(e[c])?t[c]=void 0:e[c].constructor===Object?f(t[c],e[c],r):t[c]=e[c]}return t}function l(t){return void 0===t}function p(t){var n=F.call(t,N),e=t[N];try{t[N]=void 0;var r=!0}catch(t){}var o=R.call(t);return r&&(n?t[N]=e:delete t[N]),o}function h(t){return q.call(t)}function b(t){return null==t?void 0===t?L:G:U&&U in Object(t)?B(t):z(t)}function v(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function d(t){if(!V(t))return!1;var n=Z(t);return n==K||n==Q||n==H||n==W}function y(t){return function(t){function r(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=t.apply(this,c(n))||this;return r[Y]=[],r}return e(r,t),r.prototype.subscribe=function(t,e){var r;r=n.isObservable(t)?t:X(t)?n.pureComputed(t):n.pureComputed(function(){return n.toJS(t)});var o=r.subscribe(function(t){e(t)});return this[Y].push(o),o},r.prototype.dispose=function(){this[Y].forEach(function(t){return t.dispose()})},r}(t)}function w(t){return function(e){var i,u,c,a=this;return o(this,function(s){switch(s.label){case 0:return i=t(),u=nt.next().value,e.route.component=u,c=m(i).then(function(t){var i=t.template,c=t.viewModel;return r(a,void 0,void 0,function(){var t,r;return o(this,function(o){switch(o.label){case 0:return t={synchronous:!0,template:i},c?(r=new c(e),e.viewModel=r,[4,j(r)]):[3,2];case 1:o.sent(),t.viewModel={instance:r},o.label=2;case 2:return t.synchronous=!0,n.components.register(u,t),[2]}})})}),e.queue(c),[4];case 1:return s.sent(),n.components.unregister(u),[2]}})}}function m(t){return r(this,void 0,void 0,function(){var n,e,i=this;return o(this,function(u){switch(u.label){case 0:return n={},e=Object.keys(t).map(function(e){return r(i,void 0,void 0,function(){var r,i;return o(this,function(o){switch(o.label){case 0:return r=n,i=e,[4,t[e]];case 1:return r[i]=o.sent().default,[2]}})})}),[4,Promise.all(e)];case 1:return u.sent(),[2,n]}})})}function j(t){return r(this,void 0,void 0,function(){var n=this;return o(this,function(e){switch(e.label){case 0:return[4,Promise.all(Object.keys(t).filter(function(n){return t[n][$]}).map(function(e){return r(n,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,t[e][$]];case 1:return[2,n.sent()]}})})}))];case 1:return e.sent(),[2]}})})}function O(t){return function(n){var e;return o(this,function(r){switch(r.label){case 0:return e=document.title,[4];case 1:return r.sent(),document.title="function"==typeof t?t(n):t,[4];case 2:return r.sent(),[4];case 3:return r.sent(),document.title=e,[2]}})}}var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])},S=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},k=Object.freeze({nonenumerable:a}),x=function(){function t(){}return t.Mixin=function(t){return t(this)},t}(),_="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},P="object"==typeof _&&_&&_.Object===Object&&_,A=P,I="object"==typeof self&&self&&self.Object===Object&&self,M=A||I||Function("return this")(),T=M,E=T.Symbol,D=E,C=Object.prototype,F=C.hasOwnProperty,R=C.toString,N=D?D.toStringTag:void 0,B=p,J=Object.prototype,q=J.toString,z=h,G="[object Null]",L="[object Undefined]",U=D?D.toStringTag:void 0,Z=b,V=v,H="[object AsyncFunction]",K="[object Function]",Q="[object GeneratorFunction]",W="[object Proxy]",X=d,Y=Symbol("SUBSCRIPTIONS"),$=Symbol("INITIALIZED"),tt=function(t){function u(e){var r=t.call(this)||this;r.params=e,r.loading=n.observable(!0),a(r,"params"),a(r,"loading");var o=r.update();return r[$]=o,o.then(function(){r.subscribe(e,function(){return r.update()})}).catch(function(){console.error("Error initializing DataModel")}),r}return e(u,t),u.prototype.toJS=function(){var t={};try{for(var e=i(Object.keys(this)),r=e.next();!r.done;r=e.next()){var o=r.value;t[o]=this[o]}}catch(t){u={error:t}}finally{try{r&&!r.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}return n.toJS(t);var u,c},u.prototype.update=function(){return r(this,void 0,void 0,function(){var t,n;return o(this,function(e){switch(e.label){case 0:return this.loading(!0),t=f,n=[this],[4,this.fetch()];case 1:return t.apply(void 0,n.concat([e.sent()])),this.loading(!1),[2]}})})},u.prototype.fetch=function(){return r(this,void 0,void 0,function(){return o(this,function(t){throw new Error("fetch is not implemented in derived class")})})},u.create=function(t){return r(this,void 0,void 0,function(){var n;return o(this,function(e){switch(e.label){case 0:return n=Reflect.construct(this,[t]),[4,n[$]];case 1:return e.sent(),[2,n]}})})},u}(x.Mixin(y)),nt=function(){var t,e;return o(this,function(r){switch(r.label){case 0:t=0,r.label=1;case 1:return e="__router_view_"+t+++"__",n.components.isRegistered(e)?[3,1]:[4,e];case 2:return r.sent(),[3,1];case 3:return[2]}})}(),et=Symbol("STATE"),rt=function(){function t(t,n){var e=[];n.title&&e.push(O(n.title)),n.children&&e.push(Object.assign.apply(Object,c([{}],n.children))),n.with&&e.push(function(t){return Object.assign(t,n.with)}),n.component&&e.push(w(n.component)),this[t]=e,n.state&&(this[t][et]=n.state)}return t}(),ot=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n}(x.Mixin(y));t.utils=k,t.STATE=et,t.Route=rt,t.INITIALIZED=$,t.DataModelConstructorBuilder=tt,t.ViewModelConstructorBuilder=ot,Object.defineProperty(t,"__esModule",{value:!0})});