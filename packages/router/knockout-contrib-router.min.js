!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("knockout")):"function"==typeof define&&define.amd?define(["exports","knockout"],e):e((t.ko=t.ko||{},t.ko.router={}),t.ko)}(this,function(t,e){"use strict";function r(t,e,r,n){return new(r||(r=Promise))(function(o,i){function u(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(u,a)}c((n=n.apply(t,e||[])).next())})}function n(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(u=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(u=u.call(i,r[1])).done)return u;switch(i=0,u&&(r=[0,u.value]),r[0]){case 0:case 1:u=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!u||r[1]>u[0]&&r[1]<u[3])){c.label=r[1];break}if(6===r[0]&&c.label<u[1]){c.label=u[1],u=r;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(r);break}u[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(t){r=[6,t],i=0}finally{o=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,u,a,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function i(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t}function a(t){return this instanceof a?(this.v=t,this):new a(t)}function c(t,e,r){function n(t){l[t]&&(f[t]=function(e){return new Promise(function(r,n){h.push([t,e,r,n])>1||o(t,e)})})}function o(t,e){try{i(l[t](e))}catch(t){s(h[0][3],t)}}function i(t){t.value instanceof a?Promise.resolve(t.value.v).then(u,c):s(h[0][2],t)}function u(t){o("next",t)}function c(t){o("throw",t)}function s(t,e){t(e),h.shift(),h.length&&o(h[0][0],h[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var f,l=r.apply(t,e||[]),h=[];return f={},n("next"),n("throw"),n("return"),f[Symbol.asyncIterator]=function(){return this},f}function s(t,e){return e={exports:{}},t(e,e.exports),e.exports}function f(t){var e=Tr.call(t,Nr),r=t[Nr];try{t[Nr]=void 0;var n=!0}catch(t){}var o=Br.call(t);return n&&(e?t[Nr]=r:delete t[Nr]),o}function l(t){return Lr.call(t)}function h(t){return null==t?void 0===t?Qr:qr:Vr&&Vr in Object(t)?Ir(t):Ur(t)}function p(t){return null!=t&&"object"==typeof t}function d(t){return!0===t||!1===t||Hr(t)&&Wr(t)==Gr}function v(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function b(t){if(!Jr(t))return!1;var e=Wr(t);return e==Yr||e==Zr||e==Xr||e==tn}function y(t,e){return function(r){return t(e(r))}}function g(t){if(!Hr(t)||Wr(t)!=un)return!1;var e=on(t);if(null===e)return!0;var r=fn.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&sn.call(r)==ln}function _(t){return"string"==typeof t||!Ar(t)&&Hr(t)&&Wr(t)==pn}function m(t){return void 0===t}function w(){if(!arguments.length)return[];var t=arguments[0];return Ar(t)?t:[t]}function j(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function x(t){return Hr(t)&&Wr(t)==gn}function O(t){return Ar(t)||On(t)||!!(Pn&&t&&t[Pn])}function P(t,e,r,n,o){var i=-1,u=t.length;for(r||(r=$n),o||(o=[]);++i<u;){var a=t[i];e>0&&r(a)?e>1?P(a,e-1,r,n,o):yn(o,a):n||(o[o.length]=a)}return o}function $(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function A(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return yn(Ar(r)?Sn(r):[r],An(e,1))}function S(t){return!!zn&&zn in t}function k(t){if(null!=t){try{return Dn.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function R(t){return!(!Jr(t)||Cn(t))&&(en(t)?qn:Nn).test(Tn(t))}function E(t,e){return null==t?void 0:t[e]}function z(t,e){var r=Vn(t,e);return Qn(r)?r:void 0}function C(t,e,r){"__proto__"==e&&Gn?Gn(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function M(t,e){return t===e||t!==t&&e!==e}function D(t,e,r){var n=t[e];Yn.call(t,e)&&Jn(n,r)&&(void 0!==r||e in t)||Kn(t,e,r)}function T(t,e,r,n){var o=!r;r||(r={});for(var i=-1,u=e.length;++i<u;){var a=e[i],c=n?n(r[a],t[a],a,r,t):void 0;void 0===c&&(c=t[a]),o?Kn(r,a,c):Zn(r,a,c)}return r}function B(t){return t}function N(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function I(t,e,r){return e=no(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=no(n.length-e,0),u=Array(i);++o<i;)u[o]=n[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=n[o];return a[e]=r(u),ro(t,this,a)}}function F(t){return function(){return t}}function L(t){var e=0,r=0;return function(){var n=fo(),o=so-(n-r);if(r=n,o>0){if(++e>=co)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function U(t,e){return po(oo(t,e,eo),t+"")}function q(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=bo}function Q(t){return null!=t&&yo(t.length)&&!en(t)}function V(t,e){return!!(e=null==e?_o:e)&&("number"==typeof t||mo.test(t))&&t>-1&&t%1==0&&t<e}function W(t,e,r){if(!Jr(r))return!1;var n=typeof e;return!!("number"==n?go(r)&&wo(e,r.length):"string"==n&&e in r)&&Jn(r[e],t)}function H(t){return vo(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,u=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,u&&jo(r[0],r[1],u)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var a=r[n];a&&t(e,a,n,i)}return e})}function G(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function K(){return!1}function J(t){return Hr(t)&&yo(t.length)&&!!Ao[Wr(t)]}function X(t){return function(e){return t(e)}}function Y(t,e){var r=Ar(t),n=!r&&On(t),o=!r&&!n&&$o(t),i=!r&&!n&&!o&&Co(t),u=r||n||o||i,a=u?Oo(t.length,String):[],c=a.length;for(var s in t)!e&&!Do.call(t,s)||u&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||wo(s,c))||a.push(s);return a}function Z(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Bo)}function tt(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function et(t){if(!Jr(t))return Io(t);var e=No(t),r=[];for(var n in t)("constructor"!=n||!e&&Lo.call(t,n))&&r.push(n);return r}function rt(t){return go(t)?To(t,!0):Uo(t)}function nt(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var u=t[r];e(u,r,t)&&(i[o++]=u)}return i}function ot(t){return function(e,r,n){for(var o=-1,i=Object(e),u=n(e),a=u.length;a--;){var c=u[t?a:++o];if(!1===r(i[c],c,i))break}return e}}function it(t){if(!No(t))return ei(t);var e=[];for(var r in Object(t))ni.call(t,r)&&"constructor"!=r&&e.push(r);return e}function ut(t){return go(t)?To(t):oi(t)}function at(t,e){return t&&Zo(t,e,ii)}function ct(t,e){return function(r,n){if(null==r)return r;if(!go(r))return t(r,n);for(var o=r.length,i=e?o:-1,u=Object(r);(e?i--:++i<o)&&!1!==n(u[i],i,u););return r}}function st(){this.__data__=[],this.size=0}function ft(t,e){for(var r=t.length;r--;)if(Jn(t[r][0],e))return r;return-1}function lt(t){var e=this.__data__,r=li(e,t);return!(r<0)&&(r==e.length-1?e.pop():pi.call(e,r,1),--this.size,!0)}function ht(t){var e=this.__data__,r=li(e,t);return r<0?void 0:e[r][1]}function pt(t){return li(this.__data__,t)>-1}function dt(t,e){var r=this.__data__,n=li(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function vt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function bt(){this.__data__=new gi,this.size=0}function yt(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function gt(t){return this.__data__.get(t)}function _t(t){return this.__data__.has(t)}function mt(){this.__data__=$i?$i(null):{},this.size=0}function wt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function jt(t){var e=this.__data__;if($i){var r=e[t];return r===ki?void 0:r}return Ei.call(e,t)?e[t]:void 0}function xt(t){var e=this.__data__;return $i?void 0!==e[t]:Mi.call(e,t)}function Ot(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=$i&&void 0===e?Ti:e,this}function Pt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function $t(){this.size=0,this.__data__={hash:new Ni,map:new(Oi||gi),string:new Ni}}function At(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function St(t,e){var r=t.__data__;return Fi(e)?r["string"==typeof e?"string":"hash"]:r.map}function kt(t){var e=Li(this,t).delete(t);return this.size-=e?1:0,e}function Rt(t){return Li(this,t).get(t)}function Et(t){return Li(this,t).has(t)}function zt(t,e){var r=Li(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function Ct(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Mt(t,e){var r=this.__data__;if(r instanceof gi){var n=r.__data__;if(!Oi||n.length<Hi-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Wi(n)}return r.set(t,e),this.size=r.size,this}function Dt(t){var e=this.__data__=new gi(t);this.size=e.size}function Tt(t){return this.__data__.set(t,Ji),this}function Bt(t){return this.__data__.has(t)}function Nt(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Wi;++e<r;)this.add(t[e])}function It(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Ft(t,e){return t.has(e)}function Lt(t,e,r,n,o,i){var u=r&ru,a=t.length,c=e.length;if(a!=c&&!(u&&c>a))return!1;var s=i.get(t);if(s&&i.get(e))return s==e;var f=-1,l=!0,h=r&nu?new Zi:void 0;for(i.set(t,e),i.set(e,t);++f<a;){var p=t[f],d=e[f];if(n)var v=u?n(d,p,f,e,t,i):n(p,d,f,t,e,i);if(void 0!==v){if(v)continue;l=!1;break}if(h){if(!tu(e,function(t,e){if(!eu(h,e)&&(p===t||o(p,t,r,n,i)))return h.push(e)})){l=!1;break}}else if(p!==d&&!o(p,d,r,n,i)){l=!1;break}}return i.delete(t),i.delete(e),l}function Ut(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function qt(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function Qt(t,e,r,n,o,i,u){switch(r){case wu:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case mu:return!(t.byteLength!=e.byteLength||!i(new uu(t),new uu(e)));case lu:case hu:case vu:return Jn(+t,+e);case pu:return t.name==e.name&&t.message==e.message;case bu:case gu:return t==e+"";case du:var a=au;case yu:var c=n&su;if(a||(a=cu),t.size!=e.size&&!c)return!1;var s=u.get(t);if(s)return s==e;n|=fu,u.set(t,e);var f=ou(a(t),a(e),n,o,i,u);return u.delete(t),f;case _u:if(xu)return xu.call(t)==xu.call(e)}return!1}function Vt(t,e,r){var n=e(t);return Ar(t)?n:yn(n,r(t))}function Wt(){return[]}function Ht(t){return Pu(t,ii,Eu)}function Gt(t,e,r,n,o,i){var u=r&Cu,a=zu(t),c=a.length;if(c!=zu(e).length&&!u)return!1;for(var s=c;s--;){var f=a[s];if(!(u?f in e:Du.call(e,f)))return!1}var l=i.get(t);if(l&&i.get(e))return l==e;var h=!0;i.set(t,e),i.set(e,t);for(var p=u;++s<c;){f=a[s];var d=t[f],v=e[f];if(n)var b=u?n(v,d,f,e,t,i):n(d,v,f,t,e,i);if(!(void 0===b?d===v||o(d,v,r,n,i):b)){h=!1;break}p||(p="constructor"==f)}if(h&&!p){var y=t.constructor,g=e.constructor;y!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(h=!1)}return i.delete(t),i.delete(e),h}function Kt(t,e,r,n,o,i){var u=Ar(t),a=Ar(e),c=u?ta:Xu(t),s=a?ta:Xu(e);c=c==Zu?ea:c,s=s==Zu?ea:s;var f=c==ea,l=s==ea,h=c==s;if(h&&$o(t)){if(!$o(e))return!1;u=!0,f=!1}if(h&&!f)return i||(i=new Ki),u||Co(t)?ou(t,e,r,n,o,i):Ou(t,e,c,r,n,o,i);if(!(r&Yu)){var p=f&&na.call(t,"__wrapped__"),d=l&&na.call(e,"__wrapped__");if(p||d){var v=p?t.value():t,b=d?e.value():e;return i||(i=new Ki),o(v,b,r,n,i)}}return!!h&&(i||(i=new Ki),Tu(t,e,r,n,o,i))}function Jt(t,e,r,n,o){return t===e||(null==t||null==e||!Hr(t)&&!Hr(e)?t!==t&&e!==e:oa(t,e,r,n,Jt,o))}function Xt(t,e,r,n){var o=r.length,i=o,u=!n;if(null==t)return!i;for(t=Object(t);o--;){var a=r[o];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){a=r[o];var c=a[0],s=t[c],f=a[1];if(u&&a[2]){if(void 0===s&&!(c in t))return!1}else{var l=new Ki;if(n)var h=n(s,f,c,t,e,l);if(!(void 0===h?ia(f,s,ua|aa,n,l):h))return!1}}return!0}function Yt(t){return t===t&&!Jr(t)}function Zt(t){for(var e=ii(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,sa(o)]}return e}function te(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function ee(t){var e=fa(t);return 1==e.length&&e[0][2]?la(e[0][0],e[0][1]):function(r){return r===t||ca(r,t,e)}}function re(t){return"symbol"==typeof t||Hr(t)&&Wr(t)==pa}function ne(t,e){if(Ar(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!da(t))||(ba.test(t)||!va.test(t)||null!=e&&t in Object(e))}function oe(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(ga);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return r.cache=i.set(o,u)||i,u};return r.cache=new(oe.Cache||Wi),r}function ie(t){var e=_a(t,function(t){return r.size===ma&&r.clear(),t}),r=e.cache;return e}function ue(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function ae(t){if("string"==typeof t)return t;if(Ar(t))return Aa(t,ae)+"";if(da(t))return Ra?Ra.call(t):"";var e=t+"";return"0"==e&&1/t==-Sa?"-0":e}function ce(t){return null==t?"":Ea(t)}function se(t,e){return Ar(t)?t:ya(t,e)?[t]:$a(za(t))}function fe(t){if("string"==typeof t||da(t))return t;var e=t+"";return"0"==e&&1/t==-Ma?"-0":e}function le(t,e){e=Ca(e,t);for(var r=0,n=e.length;null!=t&&r<n;)t=t[Da(e[r++])];return r&&r==n?t:void 0}function he(t,e,r){var n=null==t?void 0:Ta(t,e);return void 0===n?r:n}function pe(t,e){return null!=t&&e in Object(t)}function de(t,e,r){e=Ca(e,t);for(var n=-1,o=e.length,i=!1;++n<o;){var u=Da(e[n]);if(!(i=null!=t&&r(t,u)))break;t=t[u]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&yo(o)&&wo(u,o)&&(Ar(t)||On(t))}function ve(t,e){return null!=t&&Ia(t,e,Na)}function be(t,e){return ya(t)&&sa(e)?la(Da(t),e):function(r){var n=Ba(r,t);return void 0===n&&n===e?Fa(r,t):ia(e,n,La|Ua)}}function ye(t){return function(e){return null==e?void 0:e[t]}}function ge(t){return function(e){return Ta(e,t)}}function _e(t){return ya(t)?Qa(Da(t)):Va(t)}function me(t){return"function"==typeof t?t:null==t?eo:"object"==typeof t?Ar(t)?qa(t[0],t[1]):ha(t):Wa(t)}function we(t,e){var r=-1,n=go(t)?Array(t.length):[];return si(t,function(t,o,i){n[++r]=e(t,o,i)}),n}function je(t,e){return(Ar(t)?Aa:Ga)(t,Ha(e,3))}function xe(t,e){return An(Ka(t,e),1)}function Oe(t,e){var r={};return e=Ha(e,3),ui(t,function(t,n,o){Kn(r,n,e(t,n,o))}),r}function Pe(){}function $e(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function Ae(t,e,r,n,o){return o(t,function(t,o,i){r=n?(n=!1,t):e(r,t,o,i)}),r}function Se(t,e,r){var n=Ar(t)?Za:tc,o=arguments.length<3;return n(t,Ha(e,4),r,o,si)}function ke(t,e,r){return t===t&&(void 0!==r&&(t=t<=r?t:r),void 0!==e&&(t=t>=e?t:e)),t}function Re(t){if("number"==typeof t)return t;if(da(t))return nc;if(Jr(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Jr(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(oc,"");var r=uc.test(t);return r||ac.test(t)?cc(t.slice(2),r?2:8):ic.test(t)?nc:+t}function Ee(t){if(!t)return 0===t?t:0;if((t=sc(t))===fc||t===-fc){return(t<0?-1:1)*lc}return t===t?t:0}function ze(t){var e=hc(t),r=e%1;return e===e?r?e-r:e:0}function Ce(t,e,r){return t=za(t),r=null==r?0:rc(pc(r),0,t.length),e=Ea(e),t.slice(r,r+e.length)==e}function Me(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return r(this,void 0,void 0,function(){var r,i,a,c,s,f,l,h,p;return n(this,function(n){switch(n.label){case 0:r=0,i=!0,n.label=1;case 1:n.trys.push([1,6,7,8]),a=o(t),c=a.next(),n.label=2;case 2:return c.done?[3,5]:(s=c.value,r++,[4,Fe(s).apply(void 0,u(e))]);case 3:if(!1===(f=n.sent()))return i=!1,[3,5];n.label=4;case 4:return c=a.next(),[3,2];case 5:return[3,8];case 6:return l=n.sent(),h={error:l},[3,8];case 7:try{c&&!c.done&&(p=a.return)&&p.call(a)}finally{if(h)throw h.error}return[7];case 8:return[2,{count:r,success:i}]}})})}function De(t,e){if(0===e.indexOf("//"))for(e=e.replace("//","/");!t.isRoot;)t=t.ctx.$parent.router;else for(0===e.indexOf("./")&&(e=e.replace("./","/"),t=t.ctx.$child.router);e&&e.match(/\/?\.\./i)&&!t.isRoot;)t=t.ctx.$parent.router,e=e.replace(/\/?\.\./i,"");return{router:t,path:e}}function Te(t){var e=t.router,r=t.path;return e.ctx.base+r}function Be(t){for(var e=t.router,r=t.path,n=e.ctx;n;){if(n.router.isNavigating(),n.$child?!dc(r,n.pathname):r!==n.pathname)return!1;r=r.substr(n.pathname.length)||"/",n=n.$child}return!0}function Ne(t){return"GeneratorFunction"===t.constructor.name}function Ie(t){return!vn(t)&&en(t.then)}function Fe(t){var e=this;return void 0===t&&(t=Ya),function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return r(e,void 0,void 0,function(){var e,r,i;return n(this,function(n){switch(n.label){case 0:return e=function(){return t.length===o.length+1?new Promise(function(e){t.apply(void 0,u(o,[e]))}):t.apply(void 0,u(o))},r=e(),Ie(r)?[4,r]:[3,2];case 1:return i=n.sent(),[3,3];case 2:i=r,n.label=3;case 3:return[2,i]}})})}}function Le(t){return Ne(t)?t:function(e){return c(this,arguments,function(){var r;return n(this,function(n){switch(n.label){case 0:return[4,a(Fe(t)(e))];case 1:return r=n.sent(),hn(r)?[4,a(Fe(r.beforeRender)())]:[3,10];case 2:return[4,n.sent()];case 3:return n.sent(),[4,a(Fe(r.afterRender)())];case 4:return[4,n.sent()];case 5:return n.sent(),[4,a(Fe(r.beforeDispose)())];case 6:return[4,n.sent()];case 7:return n.sent(),[4,a(Fe(r.afterDispose)())];case 8:return[4,n.sent()];case 9:return n.sent(),[3,12];case 10:return[4,r];case 11:n.sent(),n.label=12;case 12:return[2]}})})}}function Ue(t){for(;!vn(t);){if(!vn(t.$router))return t.$router;t=t.$parentContext}return Pc.head}function qe(t,e){for(var r,n=[],o=0,i=0,u="",a=e&&e.delimiter||wc,c=e&&e.delimiters||jc,s=!1;null!==(r=xc.exec(t));){var f=r[0],l=r[1],h=r.index;if(u+=t.slice(i,h),i=h+f.length,l)u+=l[1],s=!0;else{var p="",d=t[i],v=r[2],b=r[3],y=r[4],g=r[5];if(!s&&u.length){var _=u.length-1;c.indexOf(u[_])>-1&&(p=u[_],u=u.slice(0,_))}u&&(n.push(u),u="",s=!1);var m=""!==p&&void 0!==d&&d!==p,w="+"===g||"*"===g,j="?"===g||"*"===g,x=p||a,O=b||y;n.push({name:v||o++,prefix:p,delimiter:x,optional:j,repeat:w,partial:m,pattern:O?He(O):"[^"+We(x)+"]+?"})}}return(u||i<t.length)&&n.push(u+t.substr(i)),n}function Qe(t,e){return Ve(qe(t,e))}function Ve(t){for(var e=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(e[r]=new RegExp("^(?:"+t[r].pattern+")$"));return function(r,n){for(var o="",i=n&&n.encode||encodeURIComponent,u=0;u<t.length;u++){var a=t[u];if("string"!=typeof a){var c,s=r?r[a.name]:void 0;if(Array.isArray(s)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but got array');if(0===s.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var f=0;f<s.length;f++){if(c=i(s[f]),!e[u].test(c))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'"');o+=(0===f?a.prefix:a.delimiter)+c}}else if("string"!=typeof s&&"number"!=typeof s&&"boolean"!=typeof s){if(!a.optional)throw new TypeError('Expected "'+a.name+'" to be '+(a.repeat?"an array":"a string"));a.partial&&(o+=a.prefix)}else{if(c=i(String(s)),!e[u].test(c))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but got "'+c+'"');o+=a.prefix+c}}else o+=a}return o}}function We(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function He(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function Ge(t){return t&&t.sensitive?"":"i"}function Ke(t,e){if(!e)return t;var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}function Je(t,e,r){for(var n=[],o=0;o<t.length;o++)n.push(Ze(t[o],e,r).source);return new RegExp("(?:"+n.join("|")+")",Ge(r))}function Xe(t,e,r){return Ye(qe(t,r),e,r)}function Ye(t,e,r){r=r||{};for(var n=r.strict,o=!1!==r.end,i=We(r.delimiter||wc),u=r.delimiters||jc,a=[].concat(r.endsWith||[]).map(We).concat("$").join("|"),c="",s=!1,f=0;f<t.length;f++){var l=t[f];if("string"==typeof l)c+=We(l),s=f===t.length-1&&u.indexOf(l[l.length-1])>-1;else{var h=We(l.prefix),p=l.repeat?"(?:"+l.pattern+")(?:"+h+"(?:"+l.pattern+"))*":l.pattern;e&&e.push(l),l.optional?l.partial?c+=h+"("+p+")?":c+="(?:"+h+"("+p+"))?":c+=h+"("+p+")"}}return o?(n||(c+="(?:"+i+")?"),c+="$"===a?"$":"(?="+a+")"):(n||(c+="(?:"+i+"(?="+a+"))?"),s||(c+="(?="+i+"|"+a+")")),new RegExp("^"+c,Ge(r))}function Ze(t,e,r){return t instanceof RegExp?Ke(t,e):Array.isArray(t)?Je(t,e,r):Xe(t,e,r)}function tr(t){var e=Pc.head;if(e)for(;e.bound;)e=e.ctx.$child.router;else e=new Pc(Pc.getPathFromLocation(),void 0,t);if(e.bound=!0,e.isRoot)e.ctx.runBeforeRender().then(function(){e.ctx._redirect?e.ctx.runAfterRender().then(function(){var t=De(e,e.ctx._redirect),r=t.router,n=t.path;r.update(n,e.ctx._redirectArgs)}):(e.ctx.render(),Ka(Pc.onInit,function(t){return t(e)}))});else if(e.ctx._redirect){var r=De(e,e.ctx._redirect),n=r.router,o=r.path;setTimeout(function(){return n.update(o,e.ctx._redirectArgs)})}return e}var er="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},rr=s(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),nr=s(function(t){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)}),or=rr["__core-js_shared__"]||(rr["__core-js_shared__"]={}),ir=function(t){return or[t]||(or[t]={})},ur=0,ar=Math.random(),cr=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ur+ar).toString(36))},sr=s(function(t){var e=ir("wks"),r=rr.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:cr)("Symbol."+t))}).store=e}),fr=sr,lr={f:fr},hr=function(t){return"object"==typeof t?null!==t:"function"==typeof t},pr=function(t){if(!hr(t))throw TypeError(t+" is not an object!");return t},dr=function(t){try{return!!t()}catch(t){return!0}},vr=!dr(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),br=rr.document,yr=hr(br)&&hr(br.createElement),gr=function(t){return yr?br.createElement(t):{}},_r=!vr&&!dr(function(){return 7!=Object.defineProperty(gr("div"),"a",{get:function(){return 7}}).a}),mr=function(t,e){if(!hr(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!hr(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!hr(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!hr(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},wr=Object.defineProperty,jr=vr?Object.defineProperty:function(t,e,r){if(pr(t),e=mr(e,!0),pr(r),_r)try{return wr(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t},xr={f:jr},Or=xr.f,Pr=function(t){var e=nr.Symbol||(nr.Symbol=rr.Symbol||{});"_"==t.charAt(0)||t in e||Or(e,t,{value:lr.f(t)})};Pr("asyncIterator"),Pr("observable");var $r=Array.isArray,Ar=$r,Sr="object"==typeof er&&er&&er.Object===Object&&er,kr=Sr,Rr="object"==typeof self&&self&&self.Object===Object&&self,Er=kr||Rr||Function("return this")(),zr=Er,Cr=zr.Symbol,Mr=Cr,Dr=Object.prototype,Tr=Dr.hasOwnProperty,Br=Dr.toString,Nr=Mr?Mr.toStringTag:void 0,Ir=f,Fr=Object.prototype,Lr=Fr.toString,Ur=l,qr="[object Null]",Qr="[object Undefined]",Vr=Mr?Mr.toStringTag:void 0,Wr=h,Hr=p,Gr="[object Boolean]",Kr=d,Jr=v,Xr="[object AsyncFunction]",Yr="[object Function]",Zr="[object GeneratorFunction]",tn="[object Proxy]",en=b,rn=y,nn=rn(Object.getPrototypeOf,Object),on=nn,un="[object Object]",an=Function.prototype,cn=Object.prototype,sn=an.toString,fn=cn.hasOwnProperty,ln=sn.call(Object),hn=g,pn="[object String]",dn=_,vn=m,bn=w,yn=j,gn="[object Arguments]",_n=x,mn=Object.prototype,wn=mn.hasOwnProperty,jn=mn.propertyIsEnumerable,xn=_n(function(){return arguments}())?_n:function(t){return Hr(t)&&wn.call(t,"callee")&&!jn.call(t,"callee")},On=xn,Pn=Mr?Mr.isConcatSpreadable:void 0,$n=O,An=P,Sn=$,kn=A,Rn=zr["__core-js_shared__"],En=Rn,zn=function(){var t=/[^.]+$/.exec(En&&En.keys&&En.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Cn=S,Mn=Function.prototype,Dn=Mn.toString,Tn=k,Bn=/[\\^$.*+?()[\]{}|]/g,Nn=/^\[object .+?Constructor\]$/,In=Function.prototype,Fn=Object.prototype,Ln=In.toString,Un=Fn.hasOwnProperty,qn=RegExp("^"+Ln.call(Un).replace(Bn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qn=R,Vn=E,Wn=z,Hn=function(){try{var t=Wn(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Gn=Hn,Kn=C,Jn=M,Xn=Object.prototype,Yn=Xn.hasOwnProperty,Zn=D,to=T,eo=B,ro=N,no=Math.max,oo=I,io=F,uo=Gn?function(t,e){return Gn(t,"toString",{configurable:!0,enumerable:!1,value:io(e),writable:!0})}:eo,ao=uo,co=800,so=16,fo=Date.now,lo=L,ho=lo(ao),po=ho,vo=U,bo=9007199254740991,yo=q,go=Q,_o=9007199254740991,mo=/^(?:0|[1-9]\d*)$/,wo=V,jo=W,xo=H,Oo=G,Po=K,$o=s(function(t,e){var r=e&&!e.nodeType&&e,n=r&&!0&&t&&!t.nodeType&&t,o=n&&n.exports===r,i=o?zr.Buffer:void 0,u=i?i.isBuffer:void 0,a=u||Po;t.exports=a}),Ao={};Ao["[object Float32Array]"]=Ao["[object Float64Array]"]=Ao["[object Int8Array]"]=Ao["[object Int16Array]"]=Ao["[object Int32Array]"]=Ao["[object Uint8Array]"]=Ao["[object Uint8ClampedArray]"]=Ao["[object Uint16Array]"]=Ao["[object Uint32Array]"]=!0,Ao["[object Arguments]"]=Ao["[object Array]"]=Ao["[object ArrayBuffer]"]=Ao["[object Boolean]"]=Ao["[object DataView]"]=Ao["[object Date]"]=Ao["[object Error]"]=Ao["[object Function]"]=Ao["[object Map]"]=Ao["[object Number]"]=Ao["[object Object]"]=Ao["[object RegExp]"]=Ao["[object Set]"]=Ao["[object String]"]=Ao["[object WeakMap]"]=!1;var So=J,ko=X,Ro=s(function(t,e){var r=e&&!e.nodeType&&e,n=r&&!0&&t&&!t.nodeType&&t,o=n&&n.exports===r,i=o&&kr.process,u=function(){try{return i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=u}),Eo=Ro&&Ro.isTypedArray,zo=Eo?ko(Eo):So,Co=zo,Mo=Object.prototype,Do=Mo.hasOwnProperty,To=Y,Bo=Object.prototype,No=Z,Io=tt,Fo=Object.prototype,Lo=Fo.hasOwnProperty,Uo=et,qo=rt,Qo=xo(function(t,e){to(e,qo(e),t)}),Vo=Qo,Wo=Vo,Ho=xo(function(t,e,r,n){to(e,qo(e),t,n)}),Go=Ho,Ko=Go,Jo=nt,Xo=ot,Yo=Xo(),Zo=Yo,ti=rn(Object.keys,Object),ei=ti,ri=Object.prototype,ni=ri.hasOwnProperty,oi=it,ii=ut,ui=at,ai=ct,ci=ai(ui),si=ci,fi=st,li=ft,hi=Array.prototype,pi=hi.splice,di=lt,vi=ht,bi=pt,yi=dt;vt.prototype.clear=fi,vt.prototype.delete=di,vt.prototype.get=vi,vt.prototype.has=bi,vt.prototype.set=yi;var gi=vt,_i=bt,mi=yt,wi=gt,ji=_t,xi=Wn(zr,"Map"),Oi=xi,Pi=Wn(Object,"create"),$i=Pi,Ai=mt,Si=wt,ki="__lodash_hash_undefined__",Ri=Object.prototype,Ei=Ri.hasOwnProperty,zi=jt,Ci=Object.prototype,Mi=Ci.hasOwnProperty,Di=xt,Ti="__lodash_hash_undefined__",Bi=Ot;Pt.prototype.clear=Ai,Pt.prototype.delete=Si,Pt.prototype.get=zi,Pt.prototype.has=Di,Pt.prototype.set=Bi;var Ni=Pt,Ii=$t,Fi=At,Li=St,Ui=kt,qi=Rt,Qi=Et,Vi=zt;Ct.prototype.clear=Ii,Ct.prototype.delete=Ui,Ct.prototype.get=qi,Ct.prototype.has=Qi,Ct.prototype.set=Vi;var Wi=Ct,Hi=200,Gi=Mt;Dt.prototype.clear=_i,Dt.prototype.delete=mi,Dt.prototype.get=wi,Dt.prototype.has=ji,Dt.prototype.set=Gi;var Ki=Dt,Ji="__lodash_hash_undefined__",Xi=Tt,Yi=Bt;Nt.prototype.add=Nt.prototype.push=Xi,Nt.prototype.has=Yi;var Zi=Nt,tu=It,eu=Ft,ru=1,nu=2,ou=Lt,iu=zr.Uint8Array,uu=iu,au=Ut,cu=qt,su=1,fu=2,lu="[object Boolean]",hu="[object Date]",pu="[object Error]",du="[object Map]",vu="[object Number]",bu="[object RegExp]",yu="[object Set]",gu="[object String]",_u="[object Symbol]",mu="[object ArrayBuffer]",wu="[object DataView]",ju=Mr?Mr.prototype:void 0,xu=ju?ju.valueOf:void 0,Ou=Qt,Pu=Vt,$u=Wt,Au=Object.prototype,Su=Au.propertyIsEnumerable,ku=Object.getOwnPropertySymbols,Ru=ku?function(t){return null==t?[]:(t=Object(t),Jo(ku(t),function(e){return Su.call(t,e)}))}:$u,Eu=Ru,zu=Ht,Cu=1,Mu=Object.prototype,Du=Mu.hasOwnProperty,Tu=Gt,Bu=Wn(zr,"DataView"),Nu=Bu,Iu=Wn(zr,"Promise"),Fu=Iu,Lu=Wn(zr,"Set"),Uu=Lu,qu=Wn(zr,"WeakMap"),Qu=qu,Vu=Tn(Nu),Wu=Tn(Oi),Hu=Tn(Fu),Gu=Tn(Uu),Ku=Tn(Qu),Ju=Wr;(Nu&&"[object DataView]"!=Ju(new Nu(new ArrayBuffer(1)))||Oi&&"[object Map]"!=Ju(new Oi)||Fu&&"[object Promise]"!=Ju(Fu.resolve())||Uu&&"[object Set]"!=Ju(new Uu)||Qu&&"[object WeakMap]"!=Ju(new Qu))&&(Ju=function(t){var e=Wr(t),r="[object Object]"==e?t.constructor:void 0,n=r?Tn(r):"";if(n)switch(n){case Vu:return"[object DataView]";case Wu:return"[object Map]";case Hu:return"[object Promise]";case Gu:return"[object Set]";case Ku:return"[object WeakMap]"}return e});var Xu=Ju,Yu=1,Zu="[object Arguments]",ta="[object Array]",ea="[object Object]",ra=Object.prototype,na=ra.hasOwnProperty,oa=Kt,ia=Jt,ua=1,aa=2,ca=Xt,sa=Yt,fa=Zt,la=te,ha=ee,pa="[object Symbol]",da=re,va=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ba=/^\w*$/,ya=ne,ga="Expected a function";oe.Cache=Wi;var _a=oe,ma=500,wa=ie,ja=/^\./,xa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oa=/\\(\\)?/g,Pa=wa(function(t){var e=[];return ja.test(t)&&e.push(""),t.replace(xa,function(t,r,n,o){e.push(n?o.replace(Oa,"$1"):r||t)}),e}),$a=Pa,Aa=ue,Sa=1/0,ka=Mr?Mr.prototype:void 0,Ra=ka?ka.toString:void 0,Ea=ae,za=ce,Ca=se,Ma=1/0,Da=fe,Ta=le,Ba=he,Na=pe,Ia=de,Fa=ve,La=1,Ua=2,qa=be,Qa=ye,Va=ge,Wa=_e,Ha=me,Ga=we,Ka=je,Ja=xe,Xa=Oe,Ya=Pe,Za=$e,tc=Ae,ec=Se,rc=ke,nc=NaN,oc=/^\s+|\s+$/g,ic=/^[-+]0x[0-9a-f]+$/i,uc=/^0b[01]+$/i,ac=/^0o[0-7]+$/i,cc=parseInt,sc=Re,fc=1/0,lc=1.7976931348623157e308,hc=Ee,pc=ze,dc=Ce,vc=function(){function t(t,e,r,n){void 0===n&&(n={}),this._queue=[],this._beforeNavigateCallbacks=[],this._appMiddlewareDownstream=[],this._routeMiddlewareDownstream=[];var o=t.resolveRoute(r),i=o.parse(r),u=i.params,a=i.pathname,c=i.childPath;Wo(this,{$parent:e,params:u,path:r,pathname:a,route:o,router:t},n),e&&(e.$child=this),c&&new Pc(c,this).ctx}return t.prototype.addBeforeNavigateCallback=function(t){this._beforeNavigateCallbacks.unshift(t)},Object.defineProperty(t.prototype,"base",{get:function(){return this.router.isRoot?Pc.base:this.$parent.base+this.$parent.pathname},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canonicalPath",{get:function(){return this.base.replace(new RegExp(this.$root.base,"i"),"")+this.pathname},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$root",{get:function(){for(var t=this;t;){if(!t.$parent)return t;t=t.$parent}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$parents",{get:function(){for(var t=[],e=this.$parent;e;)t.push(e),e=e.$parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$children",{get:function(){for(var t=[],e=this.$child;e;)t.push(e),e=e.$child;return t},enumerable:!0,configurable:!0}),t.prototype.queue=function(t){this._queue.push(t)},t.prototype.redirect=function(t,e){void 0===e&&(e={}),this._redirect=t,this._redirectArgs=Wo({},e,{push:!1})},t.prototype.runBeforeNavigateCallbacks=function(){return r(this,void 0,void 0,function(){var t,e,r;return n(this,function(n){switch(n.label){case 0:for(t=this,e=[];t;)e=u(t._beforeNavigateCallbacks,e),t=t.$child;return[4,Me(e)];case 1:
return r=n.sent().success,[2,r]}})})},t.prototype.render=function(){for(var t=this;t;)vn(t._redirect)&&t.router.component(t.route.component),t=t.$child;e.tasks.runEarly()},t.prototype.runBeforeRender=function(e){return void 0===e&&(e=!0),r(this,void 0,void 0,function(){var r,o,i,u;return n(this,function(n){switch(n.label){case 0:return r=t.runMiddleware(Pc.middleware,this),o=t.runMiddleware(this.route.middleware,this),[4,Me(r)];case 1:return i=n.sent().count,[4,Me(o)];case 2:return u=n.sent().count,this._appMiddlewareDownstream=r.slice(0,i),this._routeMiddlewareDownstream=o.slice(0,u),this.$child&&vn(this._redirect)?[4,this.$child.runBeforeRender(!1)]:[3,4];case 3:n.sent(),n.label=4;case 4:return e?[4,this.flushQueue()]:[3,6];case 5:n.sent(),n.label=6;case 6:return[2]}})})},t.prototype.runAfterRender=function(){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,Me(kn(this._appMiddlewareDownstream,this._routeMiddlewareDownstream))];case 1:return t.sent(),[4,this.flushQueue()];case 2:return t.sent(),[2]}})})},t.prototype.runBeforeDispose=function(t){return void 0===t&&(t=!0),r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return this.$child&&vn(this._redirect)?[4,this.$child.runBeforeDispose(!1)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[4,Me(kn(this._routeMiddlewareDownstream,this._appMiddlewareDownstream))];case 3:return e.sent(),t?[4,this.flushQueue()]:[3,5];case 4:e.sent(),e.label=5;case 5:return[2]}})})},t.prototype.runAfterDispose=function(t){return void 0===t&&(t=!0),r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return this.$child&&vn(this._redirect)?[4,this.$child.runAfterDispose(!1)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[4,Me(kn(this._routeMiddlewareDownstream,this._appMiddlewareDownstream))];case 3:return e.sent(),t?[4,this.flushQueue()]:[3,5];case 4:e.sent(),e.label=5;case 5:return[2]}})})},t.prototype.flushQueue=function(){return r(this,void 0,void 0,function(){var t,e,r=this;return n(this,function(n){switch(n.label){case 0:return t=Promise.all(this._queue).then(function(){r._queue=[]}),e=Ka(this.$children,function(t){return t.flushQueue()}),[4,Promise.all(u([t],e))];case 1:return n.sent(),[2]}})})},t.runMiddleware=function(t,e){var o=this;return Ka(t,function(t){var i=Le(t)(e),u=!0;return function(){return r(o,void 0,void 0,function(){var t;return n(this,function(r){switch(r.label){case 0:return t=i.next(),Ie(t)?[4,t]:[3,2];case 1:return r.sent(),[3,4];case 2:return Ie(t.value)?[4,t.value]:[3,4];case 3:r.sent(),r.label=4;case 4:return u?(u=!1,[2,vn(e._redirect)]):[2,!0]}})})}})},t}(),bc=Ze,yc=qe,gc=Qe,_c=Ve,mc=Ye,wc="/",jc="./",xc=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");bc.parse=yc,bc.compile=gc,bc.tokensToFunction=_c,bc.tokensToRegExp=mc;var Oc=function(){function t(e,r){var n=i(t.parseConfig(r),3),o=n[0],u=n[1],a=n[2];this.path=e,this.component=o,this.middleware=u,this.children=a;var c=t.parsePath(e,!vn(a)),s=c.keys,f=c.regexp;this.keys=s,this.regexp=f}return t.prototype.matches=function(t){var e=this.regexp.exec(t);if(null===e)return!1;if(this.children){try{for(var r=o(this.children),n=r.next();!n.done;n=r.next()){var i=n.value,u="/"+(e[e.length-1]||"");if(i.matches(u))return!0}}catch(t){a={error:t}}finally{try{n&&!n.done&&(c=r.return)&&c.call(r)}finally{if(a)throw a.error}}return!1}return!0;var a,c},t.prototype.parse=function(t){for(var e,r=t,n={},o=this.regexp.exec(t),i=1,u=o.length;i<u;++i){var a=this.keys[i-1],c=o[i]||"";"__child_path__"===a.name?(e="/"+c,r=t.replace(new RegExp(e+"$"),"")):n[a.name]=c}return{params:n,pathname:r,childPath:e}},t.parseConfig=function(e){var r,n,o=ec(e,function(e,o){return dn(o)?(o=o,r=o):hn(o)?(o=o,n=Ka(o,function(e,r){return new t(r,e)}),r||(r="router")):en(o)&&(o=o,e.push(o)),e},[]);return[r,o,n]},t.parsePath=function(t,e){e&&(t=t.replace(/\/?!?$/,"/!")),t="!"===t[t.length-1]?t.replace("!",":__child_path__(.*)?"):t.replace(/\(?\*\)?/,"(.*)");var r=[];return{keys:r,regexp:bc(t,r)}},t}(),Pc=function(){function t(r,n,o){void 0===o&&(o={}),this.onInit=[],this.component=e.observable(null),this.isNavigating=e.observable(!0),this.isRoot=vn(n),this.routes=this.isRoot?t.createRoutes(t.routes):n.route.children,this.isRoot&&(t.head=this,document.addEventListener(t.events.click,t.onclick),window.addEventListener(t.events.popstate,t.onpopstate)),this.ctx=new vc(this,n,t.getPath(r),o)}return Object.defineProperty(t.prototype,"initialized",{get:function(){var t=this;return this.isNavigating()?new Promise(function(e){return t.onInit.push(e)}):Promise.resolve(this)},enumerable:!0,configurable:!0}),t.prototype.init=function(){var t=this;this.isNavigating(!1),this.ctx.runAfterRender().then(function(){for(var e=t.ctx;e;)Ka(e.router.onInit,function(t){return function(e){return e(t)}}(e.router)),e=e.$child})},t.prototype.update=function(o,i){return r(this,void 0,void 0,function(){var r,u,a,c,s,f,l,h,p,d,v,b,y,g,_,m;return n(this,function(n){switch(n.label){case 0:return r=Kr(i)?{push:i}:vn(i)?{}:i,vn(r.push)&&(r.push=!0),vn(r.with)&&(r.with={}),u=this.ctx,a=t.parseUrl(o),c=a.search,s=a.hash,f=t.getPath(o),l=this.resolveRoute(f),h=l.parse(f),p=h.pathname,d=h.childPath,v=u.pathname===p,u.$child&&v&&!r.force?[4,u.$child.router.update(d+c+s,r)]:[3,2];case 1:return[2,n.sent()];case 2:return b=new vc(this,this.ctx.$parent,f,r.with),b.route?[4,u.runBeforeNavigateCallbacks()]:[2,!1];case 3:return!1===(y=n.sent())?[2,!1]:(this.isNavigating(!0),[4,u.runBeforeDispose()]);case 4:return n.sent(),history[r.push?"pushState":"replaceState"](history.state,document.title,b.base+b.path+c+s),[4,b.runBeforeRender()];case 5:return n.sent(),vn(b._redirect)&&(this.component(null),e.tasks.runEarly()),this.ctx=b,[4,u.runAfterDispose()];case 6:return n.sent(),b.render(),vn(b._redirect)?[3,8]:[4,b.runAfterRender()];case 7:n.sent(),g=De(b.router,b._redirect),_=g.router,m=g.path,_.update(m,b._redirectArgs),n.label=8;case 8:return[2,!0]}})})},t.prototype.resolveRoute=function(t){var e,r=1/0;for(var n in this.routes)if(this.routes.hasOwnProperty(n)){var o=this.routes[n];if(o.matches(t)){if(0===o.keys.length)return o;(r===1/0||o.keys.length<r&&".*"!==o.keys[0].pattern)&&(r=o.keys.length,e=o)}}return e},t.prototype.dispose=function(){this.isRoot&&(document.removeEventListener(t.events.click,t.onclick,!1),window.removeEventListener(t.events.popstate,t.onpopstate,!1),delete t.head)},Object.defineProperty(t,"initialized",{get:function(){var e=this;return t.head?Promise.resolve(t.head):new Promise(function(t){return e.onInit.push(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(t,"base",{get:function(){return t.config.base+(t.config.hashbang?"/#!":"")},enumerable:!0,configurable:!0}),t.setConfig=function(e){var r=e.base,n=e.hashbang,o=e.activePathCSSClass;return Ko(t.config,{base:r,hashbang:n,activePathCSSClass:o},function(t,e){return vn(e)?t:e}),this},t.use=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(n=t.middleware).push.apply(n,u(e)),this;var n},t.usePlugin=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(n=t.plugins).push.apply(n,u(e)),this;var n},t.useRoutes=function(e){return Wo(t.routes,t.normalizeRoutes(e)),this},t.get=function(e){for(var r=t.head;e-- >0;)r=r.ctx.$child.router;return r},t.update=function(e,o){return r(this,void 0,void 0,function(){return n(this,function(r){switch(r.label){case 0:return[4,t.head.update(e,o)];case 1:return[2,r.sent()]}})})},t.getPathFromLocation=function(){var e=location.pathname+location.search+location.hash,r=t.config.base.replace("#!","#?!?");return e.replace(new RegExp(r,"i"),"")},t.onclick=function(e){if(!e.defaultPrevented){for(var r=e.target;r&&"A"!==r.nodeName;)r=r.parentNode;if(r&&"A"===r.nodeName){var n=r.pathname,o=r.search,i=r.hash,u=void 0===i?"":i,a=(n+o+u).replace(new RegExp(t.base,"i"),""),c=t.hasRoute(a),s=!t.sameOrigin(r.href),f=1!==t.which(e),l=r.hasAttribute("download"),h="#"===r.getAttribute("href"),p=0===(r.getAttribute("href")||"").indexOf("mailto:"),d="external"===r.getAttribute("rel"),v=e.metaKey||e.ctrlKey||e.shiftKey,b=r.hasAttribute("target");!c||s||f||l||h||p||d||v||b||(t.update(a),e.preventDefault())}}},t.onpopstate=function(e){t.update(t.getPathFromLocation(),!1),e.preventDefault()},t.canonicalizePath=function(t){return t.replace(new RegExp("/?#?!?/?"),"/")},t.parseUrl=function(e){var r=document.createElement("a"),n=t.base.toLowerCase();return n&&0===e.toLowerCase().indexOf(n)&&(e=e.replace(new RegExp(n,"i"),"")||"/"),r.href=t.canonicalizePath(e),{hash:r.hash,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname,search:r.search}},t.getPath=function(e){return t.parseUrl(e).pathname},t.hasRoute=function(e){return!vn(t.head.resolveRoute(t.getPath(e)))},t.createRoutes=function(t){return Ka(t,function(t,e){return new Oc(e,t)})},t.normalizeRoutes=function(e){return Xa(e,function(e){return Ka(t.runPlugins(e),function(e){return hn(e)?t.normalizeRoutes(e):e})})},t.runPlugins=function(e){return Ja(bn(e),function(e){var r=ec(t.plugins,function(t,r){var n=r(e);return vn(n)?t:t.concat(bn(n))},[]);return r.length>0?r:e})},t.sameOrigin=function(t){var e=location.hostname,r=location.port,n=location.protocol,o=n+"//"+e;return r&&(o+=":"+r),t&&0===t.indexOf(o)},t.which=function(t){return t=t||window.event,null===t.which?t.button:t.which},t.onInit=[],t.middleware=[],t.plugins=[],t.config={base:"",hashbang:!1,activePathCSSClass:"active-path"},t.routes={},t.events={click:document.ontouchstart?"touchstart":"click",popstate:"popstate"},t}(),$c={init:function(t,r,n,o,i){var u=n.get("pathActiveClass")||Pc.config.activePathCSSClass,a=e.unwrap(r());Pc.initialized.then(function(){var r=Ue(i),n=e.pureComputed(function(){return De(r,a)});e.applyBindingsToNode(t,{css:(o={},o[u]=e.pureComputed(function(){return Be(n())}),o)});var o})}};e.bindingHandlers.activePath=$c;var Ac={init:function(t,r,n,o,i){var u=e.unwrap(r());$c.init.apply(this,arguments),Pc.initialized.then(function(){var r=Ue(i),n=e.pureComputed(function(){return De(r,u)});e.applyBindingsToNode(t,{attr:{href:e.pureComputed(function(){return Te(n())})}})})}};e.bindingHandlers.path=Ac,e.components.register("router",{synchronous:!0,viewModel:{createViewModel:tr},template:'<div data-bind="if: component">\n      <div class="router-view" data-bind="__router__"></div>\n    </div>'}),e.bindingHandlers.__router__={init:function(t,r,n,o,i){var u=i.$rawData;return e.applyBindingsToNode(t,{css:u.component,component:{name:u.component,params:u.ctx}},i.extend({$router:u})),u.isRoot?u.init():u.ctx.$parent.router.initialized.then(function(){return u.init()}),{controlsDescendantBindings:!0}}},t.Context=vc,t.Route=Oc,t.Router=Pc,t.isActivePath=Be,t.resolveHref=Te,Object.defineProperty(t,"__esModule",{value:!0})});